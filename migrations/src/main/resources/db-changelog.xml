<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd">
    <changeSet author="jesuspg (generated)" id="1-1">
        <createTable tableName="artifact_attribute">
            <column name="artifact_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="attributes_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-2">
        <createTable tableName="metadata">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="description" type="VARCHAR(2048)"/>
            <column name="key" type="VARCHAR(256)">
                <constraints nullable="false"/>
            </column>
            <column name="v" type="INT8"/>
            <column name="value" type="VARCHAR(2048)">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-3">
        <createTable tableName="network">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="name" type="VARCHAR(255)"/>
            <column name="vdc" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-4">
        <createTable tableName="network_subnetwork">
            <column name="network_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="subnets_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-5">
        <createTable tableName="networkinstance">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="adminstateup" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="idnetwork" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
            <column name="netdefault" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="shared" type="BOOL">
                <constraints nullable="false"/>
            </column>
            <column name="subnetcount" type="INT4">
                <constraints nullable="false"/>
            </column>
            <column name="tenantid" type="VARCHAR(255)"/>
            <column name="vdc" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-6">
        <createTable tableName="networkinstance_router">
            <column name="networkinstance_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="routers_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-7">
        <createTable tableName="networkinstance_subnetworkinstance">
            <column name="networkinstance_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="subnets_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-8">
        <createTable tableName="productrelease_metadata">
            <column name="productrelease_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="metadatas_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-9">
        <createTable tableName="router">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="idpublicnetwork" type="VARCHAR(255)"/>
            <column name="idrouter" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-10">
        <createTable tableName="subnetwork">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="cidr" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-11">
        <createTable tableName="subnetworkinstance">
            <column name="id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="allocationpoolsend" type="VARCHAR(255)"/>
            <column name="allocationpoolsstart" type="VARCHAR(255)"/>
            <column name="cidr" type="VARCHAR(255)"/>
            <column name="idnetwork" type="VARCHAR(255)"/>
            <column name="idsubnet" type="VARCHAR(255)"/>
            <column name="name" type="VARCHAR(255)"/>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-12">
        <createTable tableName="tier_has_networks">
            <column name="tier_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="network_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-13">
        <createTable tableName="tierinstance_has_networkinstance">
            <column name="tierinstance_id" type="INT8">
                <constraints nullable="false"/>
            </column>
            <column name="networkinstance_id" type="INT8">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-14">
        <addColumn tableName="tier">
            <column name="region" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-15">
        <addPrimaryKey columnNames="environment_id, tier_id" constraintName="environment_has_tiers_pkey"
                       tableName="environment_has_tiers"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-16">
        <addPrimaryKey columnNames="installableinstance_id, privateattributes_id"
                       constraintName="installableinstance_attribute_pkey" tableName="installableinstance_attribute"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-17">
        <addPrimaryKey columnNames="id" constraintName="metadata_pkey" tableName="metadata"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-18">
        <addPrimaryKey columnNames="id" constraintName="network_pkey" tableName="network"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-19">
        <addPrimaryKey columnNames="network_id, subnets_id" constraintName="network_subnetwork_pkey"
                       tableName="network_subnetwork"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-20">
        <addPrimaryKey columnNames="id" constraintName="networkinstance_pkey" tableName="networkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-21">
        <addPrimaryKey columnNames="networkinstance_id, routers_id" constraintName="networkinstance_router_pkey"
                       tableName="networkinstance_router"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-22">
        <addPrimaryKey columnNames="networkinstance_id, subnets_id"
                       constraintName="networkinstance_subnetworkinstance_pkey"
                       tableName="networkinstance_subnetworkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-23">
        <addPrimaryKey columnNames="productrelease_id, attributes_id" constraintName="productrelease_attribute_pkey"
                       tableName="productrelease_attribute"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-24">
        <addPrimaryKey columnNames="productrelease_id, metadatas_id" constraintName="productrelease_metadata_pkey"
                       tableName="productrelease_metadata"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-25">
        <addPrimaryKey columnNames="id" constraintName="router_pkey" tableName="router"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-26">
        <addPrimaryKey columnNames="id" constraintName="subnetwork_pkey" tableName="subnetwork"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-27">
        <addPrimaryKey columnNames="id" constraintName="subnetworkinstance_pkey" tableName="subnetworkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-28">
        <addPrimaryKey columnNames="tier_id, network_id" constraintName="tier_has_networks_pkey"
                       tableName="tier_has_networks"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-29">
        <addPrimaryKey columnNames="tierinstance_id, networkinstance_id"
                       constraintName="tierinstance_has_networkinstance_pkey"
                       tableName="tierinstance_has_networkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-30">
        <addForeignKeyConstraint baseColumnNames="routers_id" baseTableName="networkinstance_router"
                                 constraintName="fk29eb3265750bb3be" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="router"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-31">
        <addForeignKeyConstraint baseColumnNames="networkinstance_id" baseTableName="networkinstance_router"
                                 constraintName="fk29eb3265fd97b36a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="networkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-32">
        <addForeignKeyConstraint baseColumnNames="tierinstance_id" baseTableName="tierinstance_has_networkinstance"
                                 constraintName="fk305ce55619388c0a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="tierinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-33">
        <addForeignKeyConstraint baseColumnNames="networkinstance_id" baseTableName="tierinstance_has_networkinstance"
                                 constraintName="fk305ce556fd97b36a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="networkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-34">
        <addForeignKeyConstraint baseColumnNames="tier_id" baseTableName="tier_has_networks"
                                 constraintName="fk38408f47349a3c0a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="tier"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-35">
        <addForeignKeyConstraint baseColumnNames="network_id" baseTableName="tier_has_networks"
                                 constraintName="fk38408f4754c6c36a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="network"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-36">
        <addForeignKeyConstraint baseColumnNames="subnets_id" baseTableName="networkinstance_subnetworkinstance"
                                 constraintName="fkcc8cc79fc428ad57" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="subnetworkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-37">
        <addForeignKeyConstraint baseColumnNames="networkinstance_id" baseTableName="networkinstance_subnetworkinstance"
                                 constraintName="fkcc8cc79ffd97b36a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="networkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-38">
        <addForeignKeyConstraint baseColumnNames="metadatas_id" baseTableName="productrelease_metadata"
                                 constraintName="fkccd82b769d5fe4d5" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="metadata"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-39">
        <addForeignKeyConstraint baseColumnNames="productrelease_id" baseTableName="productrelease_metadata"
                                 constraintName="fkccd82b76f5ab782a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="productrelease"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-40">
        <addForeignKeyConstraint baseColumnNames="attributes_id" baseTableName="artifact_attribute"
                                 constraintName="fkd498e86f6ed4ac0f" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="attribute"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-41">
        <addForeignKeyConstraint baseColumnNames="artifact_id" baseTableName="artifact_attribute"
                                 constraintName="fkd498e86fdcd52e0a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="artifact"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-42">
        <addForeignKeyConstraint baseColumnNames="network_id" baseTableName="network_subnetwork"
                                 constraintName="fkdc93b6bf54c6c36a" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="network"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-43">
        <addForeignKeyConstraint baseColumnNames="subnets_id" baseTableName="network_subnetwork"
                                 constraintName="fkdc93b6bf8f53f2a2" deferrable="false" initiallyDeferred="false"
                                 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
                                 referencedTableName="subnetwork"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-44">
        <addUniqueConstraint columnNames="attributes_id" constraintName="artifact_attribute_attributes_id_key"
                             deferrable="false" disabled="false" initiallyDeferred="false"
                             tableName="artifact_attribute"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-45">
        <addUniqueConstraint columnNames="subnets_id" constraintName="network_subnetwork_subnets_id_key"
                             deferrable="false" disabled="false" initiallyDeferred="false"
                             tableName="network_subnetwork"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-46">
        <addUniqueConstraint columnNames="routers_id" constraintName="networkinstance_router_routers_id_key"
                             deferrable="false" disabled="false" initiallyDeferred="false"
                             tableName="networkinstance_router"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-47">
        <addUniqueConstraint columnNames="subnets_id" constraintName="networkinstance_subnetworkinstance_subnets_id_key"
                             deferrable="false" disabled="false" initiallyDeferred="false"
                             tableName="networkinstance_subnetworkinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-48">
        <addUniqueConstraint columnNames="metadatas_id" constraintName="productrelease_metadata_metadatas_id_key"
                             deferrable="false" disabled="false" initiallyDeferred="false"
                             tableName="productrelease_metadata"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-49">
        <dropForeignKeyConstraint baseTableName="artifact_artifact" constraintName="fk41b8419fc9df2065"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-50">
        <dropForeignKeyConstraint baseTableName="artifact_artifact" constraintName="fk41b8419fdcd52e0a"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-51">
        <dropForeignKeyConstraint baseTableName="environment" constraintName="fk5e4ad9f31bfaef2a"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-52">
        <dropForeignKeyConstraint baseTableName="applicationtype_environmenttype" constraintName="fkd97d461828bcb611"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-53">
        <dropForeignKeyConstraint baseTableName="applicationtype_environmenttype" constraintName="fkd97d461846195a0a"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-54">
        <dropUniqueConstraint constraintName="applicationtype_environmenttype_environmenttypes_id_key"
                              tableName="applicationtype_environmenttype"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-55">
        <dropUniqueConstraint constraintName="artifact_artifact_attributes_id_key" tableName="artifact_artifact"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-56">
        <dropUniqueConstraint constraintName="environmenttype_name_key" tableName="environmenttype"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-57">
        <dropTable tableName="applicationtype_environmenttype"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-58">
        <dropTable tableName="artifact_artifact"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-59">
        <dropTable tableName="environmenttype"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-60">
        <dropColumn columnName="environmenttype_id" tableName="environment"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-61">
        <modifyDataType columnName="date" newDataType="timestamp(29,6)" tableName="installableinstance"/>
    </changeSet>
    <changeSet author="jesuspg (generated)" id="1-62">
        <modifyDataType columnName="endtime" newDataType="timestamp(29,6)" tableName="task"/>
    </changeSet>

</databaseChangeLog>
